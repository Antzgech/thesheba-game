<!DOCTYPE html>
<html lang="am">
<head>
  <meta charset="UTF-8">
  <title>Saba Gift - рІЎрѕГ 2</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="container">
    <h1>РџА рІЎрѕГ 2: рЅйрїЇріЮ РџА</h1>
    <p>рЅарїірІю рІерЅ░рїѕрІ░рЅа рЅхрїЇрѕЇрЇБ рїарѕІрЅХрЅй ріерЇЇрЅ░ріЏ рїЅрІ│рЅх рІФрІ░рѕГрїІрѕЅрЇб</p>

    <!-- Health bar -->
    <div class="health-bar">
      <div id="health" class="health-fill"></div>
    </div>

    <!-- Timer -->
    <p>РЈ▒№ИЈ рЅђрѕф рїірІю: <span id="timer">30</span> рѕ░ріеріЋрІх</p>

    <!-- Battle buttons -->
    <div class="battle">
      <button class="btn" onclick="enemyAttack()">­ЪЉі рїарѕІрЅх рїЇрІхрІФ</button>
      <button class="btn" onclick="useBoost('energy')">РџА рѕЎрѕЅ ріЃрІГрѕЇ</button>
      <button class="btn" onclick="useBoost('turbo')">­ЪћЦ рЅ▒рѕГрЅд</button>
      <button class="btn" onclick="useBoost('shield')">­ЪЏА№ИЈ рїІрѕ╗</button>
    </div>

    <p id="status"></p>
    <p><a class="btn" href="index.html">­ЪЈа рІѕрІ░ рѕўріљрѕ╗ рїѕрїй</a></p>
  </div>

  <script>
    let health = 100;
    let turboActive = false;
    let shieldActive = false;
    let score = 0;
    let timeLeft = 30;
    const healthBar = document.getElementById("health");
    const status = document.getElementById("status");
    const timerDisplay = document.getElementById("timer");

    function updateHealth(value) {
      health += value;
      if (health > 100) health = 100;
      if (health < 0) health = 0;
      healthBar.style.width = health + "%";
    }

    function enemyAttack() {
      if (shieldActive) {
        status.textContent = "­ЪЏА№ИЈ рїІрѕ╗ рїЅрІ│рЅхріЋ ріарѕЇрЇјрЅ│рѕЇ!";
        shieldActive = false;
      } else {
        updateHealth(-30);
        status.textContent = "­ЪЉі рїарѕІрЅх ріерЇЇрЅ░ріЏ рїЅрІ│рЅх ріарІхрѕГрїјрЅ│рѕЇ!";
      }
      score += turboActive ? 20 : 10;
      turboActive = false;
      checkVictory();
    }

    function useBoost(type) {
      if (type === "energy") {
        updateHealth(100 - health);
        status.textContent = "РџА рїцріЊ рІѕрІ░ 100 HP рЅ░рѕўрѕЇрѕирѕЇ!";
      } else if (type === "turbo") {
        turboActive = true;
        status.textContent = "­ЪћЦ рЅ▒рѕГрЅд ріљрЅЃ!";
      } else if (type === "shield") {
        shieldActive = true;
        status.textContent = "­ЪЏА№ИЈ рїІрѕ╗ рЅ░рїарЅђрѕЮ!";
      }
    }

    function checkVictory() {
      if (health <= 0) {
        status.textContent = "РЮї рЅ░рѕИріљрЇѕрѕЁ! ріЦріЋрІ░рїѕріЊ рѕъріГрѕГ.";
        clearInterval(timerInterval);
      }
    }

    function endRound() {
      if (health > 0 && score >= 50) {
        status.textContent = "­ЪјЅ ріарѕИріљрЇѕрѕЁ! рІЎрѕГ 3 рЅ░ріерЇЇрЅирѕЇ.";
        localStorage.setItem("level3Unlocked", "true");
        Telegram.WebApp.sendData(JSON.stringify({ level: 2, score: score }));
      } else {
        status.textContent = "РЮї рЅ░рѕИріљрЇѕрѕЁ! ріЦріЋрІ░рїѕріЊ рѕъріГрѕГ.";
      }
    }

    // Timer countdown
    const timerInterval = setInterval(() => {
      timeLeft--;
      timerDisplay.textContent = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        endRound();
      }
    }, 1000);

    // Initialize health bar
    updateHealth(0);
  </script>
</body>
</html>
