<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Queen Sheba's Journey to King Solomon</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="app">
    <!-- Top Stats Bar -->
    <div class="top-bar">
      <div class="stat-item">
        <span class="stat-label">Gifts Collected</span>
        <div id="coins" class="coins">0</div>
      </div>
      <div class="stat-item">
        <span class="stat-label">Level</span>
        <div id="level" class="level-badge">1</div>
      </div>
    </div>

    <!-- Main Content Container -->
    <div class="content-container">
      <!-- Home Section - Game -->
      <section id="homeSection" class="section active">
        <div class="home-content">
          <div class="balance-display">
            <div class="quest-title">ğŸ‘‘ Queen Sheba's Journey</div>
            <div class="quest-subtitle">Travel to meet King Solomon</div>
            <div id="coinsDisplay" class="balance-amount">0</div>
            <div class="balance-label">Gifts for the King</div>
          </div>

          <!-- Game Canvas Container -->
          <div class="game-container">
            <canvas id="gameCanvas"></canvas>
            <div id="gameOverlay" class="game-overlay">
              <div class="game-instructions">
                <h3>ğŸ‘‘ The Quest Begins</h3>
                <p>Queen Sheba must journey to Jerusalem to meet the wise King Solomon</p>
                <p><strong>Tap/Space</strong> to jump over obstacles</p>
                <p><strong>Collect gifts</strong> to present to the King</p>
                <button class="start-game-btn" id="startBtn">Begin Journey</button>
              </div>
            </div>
            <div id="gameScore" class="game-score">Distance: 0</div>
          </div>

          <div class="energy-container">
            <div class="energy-header">
              <div class="energy-info">
                <span class="energy-icon">âš¡</span>
                <span id="energyText" class="energy-text">10/10</span>
              </div>
              <span class="energy-regen">+1/sec</span>
            </div>
            <div class="energy-bar">
              <div id="energyFill" class="energy-fill"></div>
            </div>
            <div class="energy-note">Each journey costs 1 energy</div>
          </div>
        </div>
      </section>

      <!-- Mine Section -->
      <section id="mineSection" class="section">
        <div class="section-header">
          <h2>â›ï¸ Prepare for Journey</h2>
          <p class="section-subtitle">Upgrade Queen Sheba's abilities</p>
        </div>
        <div id="upgrades" class="upgrades-grid"></div>
      </section>

      <!-- Earn Section -->
      <section id="earnSection" class="section">
        <div class="section-header">
          <h2>ğŸ’° Earn More Gifts</h2>
          <p class="section-subtitle">Complete tasks for extra rewards</p>
        </div>
        
        <div class="tasks-container">
          <div class="task-card daily-reward">
            <div class="task-icon">ğŸ</div>
            <div class="task-info">
              <div class="task-title">Daily Blessing</div>
              <div class="task-reward">+50 Gifts</div>
            </div>
            <button class="task-btn" onclick="claimDailyReward()">Claim</button>
          </div>

          <div class="task-card">
            <div class="task-icon">ğŸ‘¥</div>
            <div class="task-info">
              <div class="task-title">Invite 3 Friends</div>
              <div class="task-reward">+25,000 Gifts</div>
            </div>
            <div class="task-status">0/3</div>
          </div>

          <div class="task-card">
            <div class="task-icon">ğŸ“±</div>
            <div class="task-info">
              <div class="task-title">Join Telegram Channel</div>
              <div class="task-reward">+100 Gifts</div>
            </div>
            <button class="task-btn" onclick="joinChannelReward()">Join</button>
          </div>

          <div class="task-card">
            <div class="task-icon">ğŸ¬</div>
            <div class="task-info">
              <div class="task-title">Subscribe YouTube Channel</div>
              <div class="task-reward">+200 Gifts</div>
            </div>
            <button class="task-btn" onclick="subscribeChannelReward()">Subscribe</button>
          </div>
        </div>
      </section>

      <!-- Friends Section -->
      <section id="friendsSection" class="section">
        <div class="section-header">
          <h2>ğŸ‘¥ Invite Companions</h2>
          <p class="section-subtitle">Bring friends on the journey - earn together!</p>
        </div>

        <div class="referral-card">
          <div class="referral-header">
            <span class="referral-label">Your Invitation Link</span>
          </div>
          <div class="referral-link-box">
            <div id="referralLink" class="referral-link"></div>
          </div>
          <div class="referral-actions">
            <button class="btn-primary" onclick="copyReferral()">
              <span>ğŸ“‹</span> Copy Link
            </button>
            <button class="btn-secondary" onclick="shareReferral()">
              <span>ğŸ“¤</span> Share
            </button>
          </div>
        </div>

        <div class="friends-card">
          <div class="friends-header">
            <h3>Your Companions</h3>
            <span id="friendsCount" class="friends-count">0</span>
          </div>
          <div id="friendsContainer" class="friends-list">
            <div class="empty-state">
              <div class="empty-icon">ğŸ‘¥</div>
              <div class="empty-text">No companions yet</div>
              <div class="empty-subtext">Share your link to journey together!</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item active" data-section="home">
        <span class="nav-icon">ğŸ‘‘</span>
        <span class="nav-label">Journey</span>
      </button>
      <button class="nav-item" data-section="mine">
        <span class="nav-icon">âš”ï¸</span>
        <span class="nav-label">Prepare</span>
      </button>
      <button class="nav-item" data-section="earn">
        <span class="nav-icon">ğŸ’°</span>
        <span class="nav-label">Earn</span>
      </button>
      <button class="nav-item" data-section="friends">
        <span class="nav-icon">ğŸ‘¥</span>
        <span class="nav-label">Companions</span>
      </button>
    </nav>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast"></div>

  <!-- Phone Registration Modal - Streamlined -->
  <div id="phoneModal" class="phone-modal">
    <div class="phone-modal-content">
      <div class="phone-modal-header">
        <h2>ğŸ“± Phone Verification</h2>
        <p>Verify your number to join Queen Sheba's quest!</p>
      </div>
      
      <div class="phone-modal-body">
        <div class="quest-info">
          <div class="quest-icon">ğŸ†</div>
          <div class="quest-text">
            <strong>Weekly Champions Reward!</strong>
            <div class="quest-reward">Top 10 win 25 ETB Airtime</div>
          </div>
        </div>
        
        <form id="phoneForm" onsubmit="return false;">
          <div class="form-group">
            <label for="phoneInput">Your Phone Number</label>
            <input 
              type="tel" 
              id="phoneInput" 
              placeholder="09XXXXXXXX" 
              required
              maxlength="10"
            />
            <small id="phoneHelp">We'll send a verification code via SMS</small>
          </div>

          <div class="form-group">
            <label for="codeInput">Verification Code (Last 3 digits of your number)</label>
            <input 
              type="text" 
              id="codeInput" 
              placeholder="XXX" 
              required
              maxlength="3"
              pattern="[0-9]{3}"
              disabled
            />
            <small>Enter the code sent to your phone</small>
          </div>
          
          <button type="button" id="sendVerifyBtn" class="btn-verify">
            Send Verification Code
          </button>
        </form>
        
        <div class="quest-requirements">
          <p><strong>Requirements to win rewards:</strong></p>
          <ul>
            <li>âœ… Top 10 on leaderboard</li>
            <li>âœ… Subscribe YouTube channel</li>
            <li>âœ… Join Telegram channel</li>
            <li>âœ… Verified phone number</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
